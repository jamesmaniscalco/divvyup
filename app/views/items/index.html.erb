<h1>Items</h1>


<table>
  <thead>
    <tr>
      <td>Name</td>
      <td>Date added</td>
      <td>Measure by...</td>
      <td>Amount used</td>
      <td colspan=2></td>
    </tr>
  </thead>
  <tbody>
    <% @items.each do |item| %>
    <tr>
      <td><%= item.item_type.name %></td>
      <td><%= item.created_at.to_formatted_s(:short_date) %></td>
      <td><%= item.item_type.measure_by %></td>
        <% amount_used = item.amount_used %>
      <td><%= amount_used[:amount] %> <%= amount_used[:unit].pluralize(amount_used[:amount]) %>
        <% if item.finished %>
      <td colspan=2>finished on <%= item.finished_at.to_formatted_s(:short_date) %></td>
        <% else %>
      <td><%= link_to "use this", new_use_path({:use => {:item_id => item.id}}) %></td>
      <td><%= link_to "mark as finished", item_finish_path(item), method: :post %></td>
        <% end %>
    </tr>
    <% end %>
  </tbody>
</table>


<p><%= link_to "Add item",  new_item_path %></p>

